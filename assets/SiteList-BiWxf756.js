import{d as $,r as p,m,c as r,b as t,n as l,t as n,j as i,B as x,l as _,A as N,w as B,v as A,F as E,i as P,E as g,s as z,a6 as D,a7 as I,k as h,g as U,u as j,f as c,_ as H}from"./index-BFAmLiXm.js";const O={class:"page-container"},W={class:"tactical-toolbar"},q={class:"toolbar-left"},G={class:"filter-group"},J={class:"toolbar-right"},K={class:"sc2-search"},Q={class:"room-grid-container"},X={class:"room-grid"},Y=["onClick"],Z={class:"card-header"},tt={class:"room-info"},st={class:"room-name"},et={class:"energy-flow-container"},at={key:0,class:"flow-section hv-section"},lt={class:"metrics-row"},nt={class:"metric-tiny"},ot={class:"metric-tiny"},rt={key:1,class:"flow-connector"},it={class:"transformer-icon"},ct={class:"tf-load-bar"},dt={class:"tf-label"},ut={key:2,class:"flow-section lv-section"},vt={class:"metrics-row"},ft={class:"metric-tiny"},mt={class:"metric-tiny"},pt={class:"power-total"},_t={class:"val"},gt=$({__name:"SiteList",setup(ht){const y=j(),o=p("all"),v=p(""),f=p((()=>{const a=[],e=["科技园区","生产基地","总部大楼","数据中心","物流仓储"],d=["mix","mix","mix","hv","lv"];for(let s=1;s<=24;s++){const u=d[s%5],S=Math.random()>.85,V=Math.random()>.95;a.push({id:s,name:`${e[s%5]} #${Math.ceil(s/5)}`,type:u,status:S?"alarm":V?"offline":"normal",hvTemp:Math.floor(30+Math.random()*40),pdStatus:Math.random()>.9?"warning":"normal",transformerLoad:Math.floor(30+Math.random()*60),powerFactor:(.85+Math.random()*.14).toFixed(2),unbalanceRate:Math.floor(Math.random()*20),totalPower:Math.floor(200+Math.random()*800)})}return a.sort((s,u)=>s.status==="alarm"&&u.status!=="alarm"?-1:s.status!=="alarm"&&u.status==="alarm"?1:0)})()),b=m(()=>f.value.length),w=m(()=>f.value.filter(a=>a.status==="alarm").length),k=m(()=>f.value.filter(a=>a.status==="offline").length),C=m(()=>f.value.filter(a=>!(o.value==="alarm"&&a.status!=="alarm"||o.value==="offline"&&a.status!=="offline"||v.value&&!a.name.includes(v.value)))),M=a=>({mix:"混合",hv:"高压",lv:"低压"})[a],R=a=>a>80?"bg-danger":a>60?"bg-warning":"bg-success",L=a=>a>60?"text-danger":a>50?"text-warning":"text-normal",T=a=>parseFloat(a)<.9?"text-warning":"text-success",F=a=>{y.push(`/room/detail/${a.id}`)};return(a,e)=>{const d=N("el-icon");return c(),r("div",O,[t("div",W,[t("div",q,[t("div",G,[t("div",{class:l(["filter-btn",{active:o.value==="all"}]),onClick:e[0]||(e[0]=s=>o.value="all")}," 全部 ("+n(b.value)+") ",3),t("div",{class:l(["filter-btn status-danger",{active:o.value==="alarm"}]),onClick:e[1]||(e[1]=s=>o.value="alarm")},[i(d,null,{default:_(()=>[i(g(z))]),_:1}),x(" 报警 ("+n(w.value)+") ",1)],2),t("div",{class:l(["filter-btn status-offline",{active:o.value==="offline"}]),onClick:e[2]||(e[2]=s=>o.value="offline")},[i(d,null,{default:_(()=>[i(g(D))]),_:1}),x(" 离线 ("+n(k.value)+") ",1)],2)])]),t("div",J,[t("div",K,[i(d,{class:"search-icon"},{default:_(()=>[i(g(I))]),_:1}),B(t("input",{type:"text","onUpdate:modelValue":e[3]||(e[3]=s=>v.value=s),placeholder:"SEARCH UNIT..."},null,512),[[A,v.value]])])])]),t("div",Q,[t("div",X,[(c(!0),r(E,null,P(C.value,s=>(c(),r("div",{key:s.id,class:l(["room-unit-card",[s.status,s.type,{"pulse-alert":s.status==="alarm"}]]),onClick:u=>F(s)},[e[11]||(e[11]=t("div",{class:"card-corner tl"},null,-1)),e[12]||(e[12]=t("div",{class:"card-corner tr"},null,-1)),e[13]||(e[13]=t("div",{class:"card-corner bl"},null,-1)),e[14]||(e[14]=t("div",{class:"card-corner br"},null,-1)),t("div",Z,[t("div",tt,[t("div",st,n(s.name),1),t("div",{class:l(["room-type-badge",s.type])},n(M(s.type)),3)]),t("div",{class:l(["room-status-indicator",s.status])},null,2)]),t("div",et,[s.type==="mix"||s.type==="hv"?(c(),r("div",at,[e[6]||(e[6]=t("div",{class:"section-title"},"高压侧 (10kV)",-1)),t("div",lt,[t("div",nt,[e[4]||(e[4]=t("span",{class:"lbl"},"接点温度",-1)),t("span",{class:l(["val",L(s.hvTemp)])},n(s.hvTemp)+"°C",3)]),t("div",ot,[e[5]||(e[5]=t("span",{class:"lbl"},"局放状态",-1)),t("span",{class:l(["val",s.pdStatus==="warning"?"text-danger":"text-success"])},n(s.pdStatus==="warning"?"异常":"正常"),3)])])])):h("",!0),s.type==="mix"?(c(),r("div",rt,[t("div",it,[t("div",ct,[t("div",{class:l(["tf-fill",R(s.transformerLoad)]),style:U({width:s.transformerLoad+"%"})},null,6)]),t("span",dt,n(s.transformerLoad)+"%",1)])])):h("",!0),s.type==="mix"||s.type==="lv"?(c(),r("div",ut,[e[10]||(e[10]=t("div",{class:"section-title"},"低压侧 (0.4kV)",-1)),t("div",vt,[t("div",ft,[e[7]||(e[7]=t("span",{class:"lbl"},"功率因数",-1)),t("span",{class:l(["val",T(s.powerFactor)])},n(s.powerFactor),3)]),t("div",mt,[e[8]||(e[8]=t("span",{class:"lbl"},"不平衡度",-1)),t("span",{class:l(["val",s.unbalanceRate>15?"text-warning":"text-normal"])},n(s.unbalanceRate)+"%",3)])]),t("div",pt,[e[9]||(e[9]=t("span",{class:"lbl"},"总功率",-1)),t("span",_t,n(s.totalPower)+" kW",1)])])):h("",!0)])],10,Y))),128))])])])}}}),bt=H(gt,[["__scopeId","data-v-cadb0f97"]]);export{bt as default};
