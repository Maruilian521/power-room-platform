import{d as A,c as o,e as k,F as w,i as h,g as K,n as M,b as e,C as x,k as z,l,j as t,E as i,J as $,K as N,L as T,M as j,t as p,A as f,f as n,_ as L,r as _,m as Q,o as q,a as G,B as c,N as V,T as W,I as X,s as D,O as Y,P as Z,Q as ss,R as es,S as ts,U as as,V as E}from"./index-BFAmLiXm.js";const ls={class:"topology-map-container"},ns=["onClick"],ds={class:"node-icon"},is={class:"node-label"},os=A({__name:"TopologyMap",props:{devices:{}},emits:["device-click"],setup(B){return(b,r)=>{const m=f("el-icon");return n(),o("div",ls,[r[2]||(r[2]=k('<div class="schematic-grid" data-v-8ce8ea24></div><div class="floor-plan" data-v-8ce8ea24><div class="room-zone zone-hv" data-v-8ce8ea24><span class="zone-label" data-v-8ce8ea24>高压室（10kV）</span></div><div class="room-zone zone-tr" data-v-8ce8ea24><span class="zone-label" data-v-8ce8ea24>变压器区</span></div><div class="room-zone zone-lv" data-v-8ce8ea24><span class="zone-label" data-v-8ce8ea24>低压室（0.4kV）</span></div></div><svg class="topology-svg" width="100%" height="100%" data-v-8ce8ea24><line x1="10%" y1="20%" x2="40%" y2="20%" class="busbar hv" data-v-8ce8ea24></line><line x1="60%" y1="20%" x2="90%" y2="20%" class="busbar hv" data-v-8ce8ea24></line><line x1="10%" y1="80%" x2="90%" y2="80%" class="busbar lv" data-v-8ce8ea24></line><path d="M 25% 20% V 40%" class="connection" data-v-8ce8ea24></path><path d="M 75% 20% V 40%" class="connection" data-v-8ce8ea24></path><path d="M 25% 60% V 80%" class="connection" data-v-8ce8ea24></path><path d="M 75% 60% V 80%" class="connection" data-v-8ce8ea24></path></svg>',3)),(n(!0),o(w,null,h(B.devices,a=>(n(),o("div",{class:M(["device-node",[a.type,a.status]]),key:a.id,style:K({left:a.x+"%",top:a.y+"%"}),onClick:y=>b.$emit("device-click",a)},[e("div",ds,[a.type==="breaker"?(n(),x(m,{key:0},{default:l(()=>[t(i($))]),_:1})):a.type==="transformer"?(n(),x(m,{key:1},{default:l(()=>[t(i(N))]),_:1})):a.type==="camera"?(n(),x(m,{key:2},{default:l(()=>[t(i(T))]),_:1})):a.type==="env"?(n(),x(m,{key:3},{default:l(()=>[t(i(j))]),_:1})):z("",!0)]),e("div",is,p(a.name),1),r[0]||(r[0]=e("div",{class:"node-status-indicator"},null,-1)),r[1]||(r[1]=e("div",{class:"selection-ring"},null,-1))],14,ns))),128))])}}}),vs=L(os,[["__scopeId","data-v-8ce8ea24"]]),cs={class:"page-container command-center"},rs={class:"main-viewport flex flex-1 overflow-hidden gap-4"},us={class:"flank-panel left-panel"},ps={class:"sc2-panel mb-4"},ms={class:"panel-header"},fs={class:"panel-content flex flex-col items-center justify-center p-4 relative overflow-hidden"},ys={class:"w-full mt-2 px-2 space-y-3"},_s={class:"stat-row"},xs={class:"flex items-center justify-between flex-1 ml-2"},bs={class:"stat-row"},gs={class:"flex items-center justify-between flex-1 ml-2"},ks={class:"sc2-panel flex-1"},ws={class:"panel-header"},hs={class:"panel-content p-4 flex flex-col gap-4"},Cs={class:"ai-box mt-auto"},Vs={class:"ai-header"},Ms={class:"ai-body"},zs={class:"ai-action"},$s={class:"hud-header"},Ts={class:"hud-body"},Bs={class:"device-img-placeholder"},Is={key:0,class:"live-feed-mock"},Ss={key:1,class:"device-schematic"},Ds={class:"hud-actions"},Es={key:0},As={key:1},Ns={key:0,class:"safety-check"},js={class:"telemetry-ticker"},Ls={class:"ticker-content"},Os={class:"text-primary"},Us={class:"flank-panel right-panel"},Fs={class:"sc2-panel flex-1 mb-4"},Ps={class:"panel-header text-warning"},Rs={class:"panel-content p-0 overflow-hidden flex flex-col relative"},Hs={class:"event-list p-2 overflow-y-auto custom-scrollbar"},Js={class:"event-time-line"},Ks={class:"event-content"},Qs={class:"time"},qs={class:"msg"},Gs={class:"meta text-sub"},Ws={class:"sc2-panel h-[300px]"},Xs={class:"panel-header text-danger"},Ys={class:"panel-content p-4 grid grid-cols-2 gap-3"},Zs={class:"tac-btn primary"},se={class:"tac-btn warning"},ee={class:"tac-btn info"},te={class:"tac-btn danger"},ae={class:"col-span-2 mt-2 border-t border-white/10 pt-2"},le={class:"tac-btn success w-full"},ne=A({__name:"CommandCenter",setup(B){const b=_([{id:"room-a",name:"A 区配电室",devices:[{id:"cb1",name:"10kV 进线",type:"breaker",x:25,y:30,status:"closed"},{id:"cb2",name:"10kV 馈线",type:"breaker",x:75,y:30,status:"closed"},{id:"tr1",name:"#1 变压器",type:"transformer",x:25,y:50,status:"normal"},{id:"tr2",name:"#2 变压器",type:"transformer",x:75,y:50,status:"warning"},{id:"cam1",name:"摄像头-01",type:"camera",x:50,y:10,status:"active"},{id:"env1",name:"环境传感器",type:"env",x:50,y:90,status:"normal"}]},{id:"room-b",name:"B 区配电室",devices:[{id:"cb3",name:"10kV 备用进线",type:"breaker",x:30,y:35,status:"closed"},{id:"cb4",name:"0.4kV 馈线-01",type:"breaker",x:70,y:35,status:"closed"},{id:"tr3",name:"#3 变压器",type:"transformer",x:30,y:55,status:"normal"},{id:"tr4",name:"#4 变压器",type:"transformer",x:70,y:55,status:"normal"},{id:"cam2",name:"摄像头-02",type:"camera",x:50,y:15,status:"active"},{id:"env2",name:"环境传感器-02",type:"env",x:50,y:88,status:"normal"}]}]),r=_("room-a"),m=Q(()=>{const u=b.value.find(s=>s.id===r.value);return u?u.devices:[]}),a=_(null),y=_([{id:1,time:"12:14:05",type:"danger",device:"#2 变压器",message:"温度超限报警 (85°C)"},{id:2,time:"12:10:22",type:"info",device:"摄像头-01",message:"自动巡检抓拍完成"},{id:3,time:"11:55:00",type:"success",device:"10kV 进线",message:"遥测数据上传成功"},{id:4,time:"10:30:00",type:"warning",device:"门禁",message:"未授权闯入尝试"},{id:5,time:"09:00:00",type:"info",device:"系统",message:"系统自检完成"}]),O=_([{time:"12:14:05",msg:"数据链路稳定 (5ms)。"},{time:"12:14:10",msg:"预警：变压器温度偏高。"},{time:"12:14:15",msg:"视频流同步中..."}]),U=u=>{a.value=u},F=()=>{a.value=null},I=u=>{as.confirm(`确认执行 ${u} 到 ${a.value.name} 吗？需要二级授权。`,"安全联锁确认",{confirmButtonText:"执行",cancelButtonText:"取消",type:"warning",icon:D}).then(()=>{E.success(`指令已下发：已执行 ${u}。`)}).catch(()=>{E.info("操作已取消")})};let C=null;const P=()=>{const u={id:Date.now(),time:new Date().toLocaleTimeString(),type:Math.random()>.8?"warning":"info",device:"系统",message:"定期数据刷新..."};y.value.unshift(u),y.value.length>20&&y.value.pop()};return q(()=>{C=setInterval(()=>{Math.random()>.8&&P()},5e3)}),G(()=>{C&&clearInterval(C)}),(u,s)=>{const v=f("el-icon"),S=f("el-progress"),g=f("el-button"),R=f("el-option"),H=f("el-select");return n(),o("div",cs,[s[43]||(s[43]=k('<div class="hud-top" data-v-2fd7e608><div class="hud-item" data-v-2fd7e608><span class="label" data-v-2fd7e608>安全等级</span><span class="value text-success" data-v-2fd7e608>一级（安全）</span></div><div class="hud-item" data-v-2fd7e608><span class="label" data-v-2fd7e608>总负荷</span><span class="value text-primary" data-v-2fd7e608>4,250 kVA</span></div><div class="hud-item flex-1 text-center" data-v-2fd7e608><span class="central-title" data-v-2fd7e608>无人配电指挥中心</span></div><div class="hud-item" data-v-2fd7e608><span class="label" data-v-2fd7e608>活动告警</span><div class="alarm-counts" data-v-2fd7e608><span class="count text-danger" title="Critical" data-v-2fd7e608>2</span><span class="sep" data-v-2fd7e608>/</span><span class="count text-warning" title="Major" data-v-2fd7e608>5</span><span class="sep" data-v-2fd7e608>/</span><span class="count text-info" title="Minor" data-v-2fd7e608>12</span></div></div><div class="hud-item" data-v-2fd7e608><span class="label" data-v-2fd7e608>最长未处理</span><span class="value text-warning" data-v-2fd7e608>04:12:00</span></div></div>',1)),e("div",rs,[e("div",us,[e("div",ps,[e("div",ms,[t(v,null,{default:l(()=>[t(i(X))]),_:1}),s[6]||(s[6]=c(" 运行态势 ",-1))]),e("div",fs,[s[11]||(s[11]=k('<div class="health-ring-container" data-v-2fd7e608><div class="health-ring" data-v-2fd7e608></div><div class="health-core" data-v-2fd7e608><span class="score" data-v-2fd7e608>94</span><span class="label" data-v-2fd7e608>健康度</span></div></div>',1)),e("div",ys,[e("div",_s,[s[8]||(s[8]=e("span",{class:"text-sub text-xs"},"功率因数",-1)),e("div",xs,[t(S,{percentage:98,status:"success","stroke-width":8,"show-text":!1,class:"flex-1 mr-2"}),s[7]||(s[7]=e("span",{class:"text-success text-xs font-mono"},"0.98",-1))])]),e("div",bs,[s[10]||(s[10]=e("span",{class:"text-sub text-xs"},"谐波 (THDi)",-1)),e("div",gs,[t(S,{percentage:35,color:"#e6a23c","stroke-width":8,"show-text":!1,class:"flex-1 mr-2"}),s[9]||(s[9]=e("span",{class:"text-warning text-xs font-mono"},"3.5%",-1))])])])])]),e("div",ks,[e("div",ws,[t(v,null,{default:l(()=>[t(i(j))]),_:1}),s[12]||(s[12]=c(" 环境与AI洞察 ",-1))]),e("div",hs,[s[17]||(s[17]=k('<div class="grid grid-cols-2 gap-3" data-v-2fd7e608><div class="env-card" data-v-2fd7e608><div class="lbl" data-v-2fd7e608>平均温度</div><div class="val text-success" data-v-2fd7e608>24.5°C</div></div><div class="env-card" data-v-2fd7e608><div class="lbl" data-v-2fd7e608>湿度</div><div class="val text-primary" data-v-2fd7e608>45%</div></div><div class="env-card" data-v-2fd7e608><div class="lbl" data-v-2fd7e608>SF6 压力</div><div class="val text-success" data-v-2fd7e608>正常</div></div><div class="env-card warning" data-v-2fd7e608><div class="lbl" data-v-2fd7e608>门禁</div><div class="val text-warning" data-v-2fd7e608>开门 (1)</div></div></div>',1)),e("div",Cs,[e("div",Vs,[t(v,{class:"animate-pulse"},{default:l(()=>[t(i(N))]),_:1}),s[13]||(s[13]=c(" AI 建议 ",-1))]),e("div",Ms,[s[15]||(s[15]=e("p",null,"> 变压器 T-01 负载率预测将在 2h 后达到 85%。",-1)),s[16]||(s[16]=e("p",null,"> 建议：检查散热/风道运行状态，考虑投入 #2 变压器分担。",-1)),e("div",zs,[t(g,{type:"primary",size:"small",link:""},{default:l(()=>[...s[14]||(s[14]=[c("查看详情 >",-1)])]),_:1})])])])])])]),e("div",{class:"center-stage flex-1 relative",onClick:V(F,["self"])},[e("div",{class:"room-switcher",onClick:s[1]||(s[1]=V(()=>{},["stop"]))},[s[18]||(s[18]=e("span",{class:"label"},"配电室",-1)),t(H,{modelValue:r.value,"onUpdate:modelValue":s[0]||(s[0]=d=>r.value=d),size:"small",class:"room-select"},{default:l(()=>[(n(!0),o(w,null,h(b.value,d=>(n(),x(R,{key:d.id,label:d.name,value:d.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),s[25]||(s[25]=e("div",{class:"corner top-left"},null,-1)),s[26]||(s[26]=e("div",{class:"corner top-right"},null,-1)),s[27]||(s[27]=e("div",{class:"corner bottom-left"},null,-1)),s[28]||(s[28]=e("div",{class:"corner bottom-right"},null,-1)),t(vs,{devices:m.value,onDeviceClick:U},null,8,["devices"]),t(W,{name:"hud-zoom"},{default:l(()=>[a.value?(n(),o("div",{key:0,class:"device-hud-card",style:{top:"50%",left:"50%",transform:"translate(-50%, -50%)"},onClick:s[5]||(s[5]=V(()=>{},["stop"]))},[e("div",$s,[e("span",null,p(a.value.name),1),e("span",{class:M(["status-tag",a.value.status])},p(a.value.status.toUpperCase()),3)]),e("div",Ts,[e("div",Bs,[a.value.type==="camera"?(n(),o("div",Is,[t(v,{class:"animate-pulse"},{default:l(()=>[t(i(T))]),_:1}),s[19]||(s[19]=c(" 视频流连接中... ",-1))])):(n(),o("div",Ss,[t(v,null,{default:l(()=>[t(i($))]),_:1})]))]),s[24]||(s[24]=e("div",{class:"hud-stats"},[e("div",{class:"stat-pair"},[e("span",{class:"l"},"电流"),e("span",{class:"v"},"125 A")]),e("div",{class:"stat-pair"},[e("span",{class:"l"},"温度"),e("span",{class:"v text-warning"},"45°C")])],-1)),e("div",Ds,[a.value.type==="breaker"?(n(),o("div",Es,[t(g,{type:"danger",class:"w-full mb-2 pixel-btn",onClick:s[2]||(s[2]=d=>I("OPEN"))},{default:l(()=>[...s[20]||(s[20]=[c(" 远程分闸 ",-1)])]),_:1}),t(g,{type:"success",class:"w-full pixel-btn",onClick:s[3]||(s[3]=d=>I("CLOSE"))},{default:l(()=>[...s[21]||(s[21]=[c(" 远程合闸 ",-1)])]),_:1})])):(n(),o("div",As,[t(g,{type:"primary",class:"w-full pixel-btn"},{default:l(()=>[...s[22]||(s[22]=[c("查看历史",-1)])]),_:1})]))]),a.value.type==="breaker"?(n(),o("div",Ns,[t(v,{class:"text-warning"},{default:l(()=>[t(i(D))]),_:1}),s[23]||(s[23]=c(" 请按 SOP 确认 ",-1))])):z("",!0)]),e("button",{class:"close-btn",onClick:s[4]||(s[4]=d=>a.value=null)},"×")])):z("",!0)]),_:1}),e("div",js,[e("div",Ls,[(n(!0),o(w,null,h(O.value,(d,J)=>(n(),o("span",{key:J,class:"mr-8"},[e("span",Os,"["+p(d.time)+"]",1),c(" "+p(d.msg),1)]))),128))])])]),e("div",Us,[e("div",Fs,[e("div",Ps,[t(v,null,{default:l(()=>[t(i(Y))]),_:1}),s[29]||(s[29]=c(" 事件时间线 ",-1))]),e("div",Rs,[e("div",Hs,[(n(!0),o(w,null,h(y.value,d=>(n(),o("div",{key:d.id,class:"event-item animate-in"},[e("div",Js,[e("div",{class:M(["dot",d.type])},null,2),s[30]||(s[30]=e("div",{class:"line"},null,-1))]),e("div",Ks,[e("div",Qs,p(d.time),1),e("div",qs,p(d.message),1),e("div",Gs,p(d.device),1)])]))),128))]),s[31]||(s[31]=e("div",{class:"feed-overlay"},null,-1))])]),e("div",Ws,[e("div",Xs,[t(v,null,{default:l(()=>[t(i(Z))]),_:1}),s[32]||(s[32]=c(" 远方控制 ",-1))]),e("div",Ys,[e("button",Zs,[t(v,null,{default:l(()=>[t(i($))]),_:1}),s[33]||(s[33]=e("span",null,"开关遥控",-1)),s[34]||(s[34]=e("span",{class:"sub"},"开关遥控",-1))]),e("button",se,[t(v,null,{default:l(()=>[t(i(T))]),_:1}),s[35]||(s[35]=e("span",null,"视频巡检",-1)),s[36]||(s[36]=e("span",{class:"sub"},"巡检",-1))]),e("button",ee,[t(v,null,{default:l(()=>[t(i(ss))]),_:1}),s[37]||(s[37]=e("span",null,"新风策略",-1)),s[38]||(s[38]=e("span",{class:"sub"},"空调控制",-1))]),e("button",te,[t(v,null,{default:l(()=>[t(i(es))]),_:1}),s[39]||(s[39]=e("span",null,"紧急切断",-1)),s[40]||(s[40]=e("span",{class:"sub"},"应急断开",-1))]),e("div",ae,[s[42]||(s[42]=e("div",{class:"flex items-center justify-between text-xs text-sub mb-1"},[e("span",null,"授权: 管理员"),e("span",null,"令牌: 有效")],-1)),e("button",le,[t(v,null,{default:l(()=>[t(i(ts))]),_:1}),s[41]||(s[41]=e("span",null,"生成操作票",-1))])])])])])])])}}}),ie=L(ne,[["__scopeId","data-v-2fd7e608"]]);export{ie as default};
