import{d as W,r,m as w,o as Y,c as z,b as l,j as s,l as a,A as i,t as u,F as D,i as L,w as q,E as d,a7 as J,aA as Q,C as X,a8 as Z,aK as ee,af as le,y as M,aL as se,B as v,aM as te,g as ae,O as oe,aN as ne,u as ie,f as h,_ as de}from"./index-BFAmLiXm.js";import{u as ce}from"./device-Cstu3Uc2.js";const ue={class:"page-container room-ledger"},re={class:"grid grid-cols-4 gap-4 mb-4"},pe={class:"stat-card-item"},ve={class:"icon-wrapper primary"},_e={class:"info"},me={class:"value"},fe={class:"stat-card-item success"},ge={class:"icon-wrapper"},be={class:"info"},we={class:"value"},he={class:"stat-card-item danger"},ye={class:"icon-wrapper"},ke={class:"info"},xe={class:"value"},ze={class:"stat-card-item info"},Ve={class:"icon-wrapper"},Ce={class:"module-card map-section mb-4"},Re={class:"module-header"},Se={class:"header-left"},De={class:"header-right"},Le={class:"map-placeholder"},Me={class:"point-label"},Be={class:"module-card flex-1 overflow-hidden flex-col"},Ee={class:"module-header"},Ie={class:"header-left"},Te={class:"header-right toolbar-actions"},Ne={class:"filter-set"},Ae={class:"btn-set"},Ue=["onClick"],je={class:"address-text"},$e={class:"pagination-wrapper mt-4 flex justify-end"},Fe={class:"docs-list"},Pe={class:"doc-info"},Ke={class:"name"},Oe={class:"meta"},Ge=W({__name:"RoomLedger",setup(He){const V=ie(),B=ce(),m=r([]),y=r(!1),_=r(""),f=r(""),k=r(1),g=r(15),E=w(()=>m.value.length),I=w(()=>Math.floor(m.value.length*.95)),T=r(3);Y(async()=>{y.value=!0,await B.fetchRooms();try{const e=await(await fetch("/api/rooms")).json();m.value=e.data}finally{y.value=!1}});const C=w(()=>m.value.filter(o=>{const e=!_.value||o.name.includes(_.value)||o.location.includes(_.value)||o.code&&o.code.includes(_.value),n=!f.value||o.region===f.value;return e&&n})),N=w(()=>{const o=(k.value-1)*g.value;return C.value.slice(o,o+g.value)}),R=o=>{V.push(`/assets/room-ledger/${o.id}`)},A=()=>{V.push("/monitoring/site-map")},x=r(!1),U=[{name:"配电室平面布置图.pdf",size:"2.4 MB",date:"2023-01-15"},{name:"一次系统接线图.dwg",size:"5.1 MB",date:"2023-01-15"},{name:"消防验收合格证.jpg",size:"1.2 MB",date:"2023-02-20"}],j=()=>{x.value=!0};return(o,e)=>{const n=i("el-icon"),p=i("el-button"),$=i("el-input"),b=i("el-option"),F=i("el-select"),c=i("el-table-column"),P=i("el-tag"),K=i("el-table"),O=i("el-pagination"),G=i("el-dialog"),H=Q("loading");return h(),z("div",ue,[l("div",re,[l("div",pe,[l("div",ve,[s(n,null,{default:a(()=>[s(d(Z))]),_:1})]),l("div",_e,[e[6]||(e[6]=l("div",{class:"label"},"总站点数",-1)),l("div",me,u(E.value),1)])]),l("div",fe,[l("div",ge,[s(n,null,{default:a(()=>[s(d(ee))]),_:1})]),l("div",be,[e[7]||(e[7]=l("div",{class:"label"},"在用站点",-1)),l("div",we,u(I.value),1)])]),l("div",he,[l("div",ye,[s(n,null,{default:a(()=>[s(d(le))]),_:1})]),l("div",ke,[e[8]||(e[8]=l("div",{class:"label"},"即将到期",-1)),l("div",xe,u(T.value),1)])]),l("div",ze,[l("div",Ve,[s(n,null,{default:a(()=>[s(d(M))]),_:1})]),e[9]||(e[9]=l("div",{class:"info"},[l("div",{class:"label"},"文档覆盖率"),l("div",{class:"value"},"98%")],-1))])]),l("div",Ce,[l("div",Re,[l("div",Se,[s(n,null,{default:a(()=>[s(d(se))]),_:1}),e[10]||(e[10]=l("span",null,"站点分布概览 (GIS TACTICAL VIEW)",-1))]),l("div",De,[s(p,{size:"small",class:"sc2-btn-outline",onClick:A},{default:a(()=>[s(n,null,{default:a(()=>[s(d(te))]),_:1}),e[11]||(e[11]=v(" 全屏模式 ",-1))]),_:1})])]),l("div",Le,[e[14]||(e[14]=l("div",{class:"map-grid"},null,-1)),e[15]||(e[15]=l("div",{class:"map-terrain"},null,-1)),e[16]||(e[16]=l("div",{class:"radar-scan"},null,-1)),(h(),z(D,null,L(5,t=>l("div",{key:t,class:"map-point",style:ae({top:20+Math.random()*60+"%",left:10+Math.random()*80+"%"})},[e[12]||(e[12]=l("div",{class:"point-ring"},null,-1)),e[13]||(e[13]=l("div",{class:"point-dot"},null,-1)),l("div",Me,"UNIT-"+u(t),1)],4)),64)),e[17]||(e[17]=l("div",{class:"map-overlay-text"},"SYSTEM ONLINE // SATELLITE LINK ESTABLISHED",-1))])]),l("div",Be,[l("div",Ee,[l("div",Ie,[s(n,null,{default:a(()=>[s(d(oe))]),_:1}),e[18]||(e[18]=l("span",null,"站点台账列表",-1))]),l("div",Te,[l("div",Ne,[s($,{modelValue:_.value,"onUpdate:modelValue":e[0]||(e[0]=t=>_.value=t),placeholder:"搜索名称/编码...","prefix-icon":d(J),class:"sc2-input search-wide"},null,8,["modelValue","prefix-icon"]),s(F,{modelValue:f.value,"onUpdate:modelValue":e[1]||(e[1]=t=>f.value=t),placeholder:"行政区域",class:"sc2-select region-select",clearable:""},{default:a(()=>[s(b,{label:"全部区域",value:""}),s(b,{label:"朝阳区",value:"朝阳区"}),s(b,{label:"海淀区",value:"海淀区"}),s(b,{label:"丰台区",value:"丰台区"})]),_:1},8,["modelValue"])]),l("div",Ae,[s(p,{type:"primary",icon:"Plus"},{default:a(()=>[...e[19]||(e[19]=[v("新建台账",-1)])]),_:1}),s(p,{class:"sc2-btn-outline",icon:"Download"},{default:a(()=>[...e[20]||(e[20]=[v("导出",-1)])]),_:1})])])]),q((h(),X(K,{data:N.value,class:"sc2-table flex-1",stripe:""},{default:a(()=>[s(c,{prop:"name",label:"站点名称","min-width":"180"},{default:a(({row:t})=>[l("span",{class:"room-link",onClick:S=>R(t)},u(t.name),9,Ue)]),_:1}),s(c,{prop:"code",label:"站点编码",width:"140"}),s(c,{prop:"region",label:"行政区域",width:"100"}),s(c,{prop:"location",label:"详细地址","min-width":"200","show-overflow-tooltip":""},{default:a(({row:t})=>[l("span",je,u(t.location),1),s(n,{class:"copy-icon",title:"复制地��"},{default:a(()=>[s(d(ne))]),_:1})]),_:1}),s(c,{prop:"manager",label:"负责人",width:"100"}),s(c,{prop:"phone",label:"联系电话",width:"120"}),s(c,{prop:"commissionDate",label:"投运日期",width:"120"}),s(c,{label:"状态",width:"100"},{default:a(()=>[s(P,{type:"success",effect:"dark",class:"sc2-tag"},{default:a(()=>[...e[21]||(e[21]=[v("正常使用",-1)])]),_:1})]),_:1}),s(c,{label:"操作",width:"180",fixed:"right"},{default:a(({row:t})=>[s(p,{link:"",type:"primary",size:"small",onClick:e[2]||(e[2]=S=>j())},{default:a(()=>[...e[22]||(e[22]=[v("文档",-1)])]),_:1}),s(p,{link:"",type:"info",size:"small",onClick:S=>R(t)},{default:a(()=>[...e[23]||(e[23]=[v("详情",-1)])]),_:1},8,["onClick"]),s(p,{link:"",type:"warning",size:"small"},{default:a(()=>[...e[24]||(e[24]=[v("编辑",-1)])]),_:1})]),_:1})]),_:1},8,["data"])),[[H,y.value]]),l("div",$e,[s(O,{"current-page":k.value,"onUpdate:currentPage":e[3]||(e[3]=t=>k.value=t),"page-size":g.value,"onUpdate:pageSize":e[4]||(e[4]=t=>g.value=t),layout:"total, sizes, prev, pager, next, jumper",total:C.value.length},null,8,["current-page","page-size","total"])])]),s(G,{modelValue:x.value,"onUpdate:modelValue":e[5]||(e[5]=t=>x.value=t),title:"站点文档资料",width:"600px",class:"sc2-dialog"},{default:a(()=>[l("div",Fe,[(h(),z(D,null,L(U,t=>l("div",{class:"doc-item",key:t.name},[s(n,{class:"doc-icon"},{default:a(()=>[s(d(M))]),_:1}),l("div",Pe,[l("div",Ke,u(t.name),1),l("div",Oe,u(t.size)+" | "+u(t.date),1)]),s(p,{size:"small",icon:"Download",circle:""})])),64))])]),_:1},8,["modelValue"])])}}}),qe=de(Ge,[["__scopeId","data-v-2e4e0895"]]);export{qe as default};
