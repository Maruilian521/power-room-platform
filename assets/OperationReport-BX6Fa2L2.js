import{i as u}from"./index-B-ioSKa-.js";import{d as ee,r as n,z as te,o as se,aT as P,a as le,c as F,b as t,j as s,l as a,A as p,t as m,B as v,E as b,aU as ae,a0 as oe,Y as ie,s as ne,y as re,f as V,_ as de}from"./index-BFAmLiXm.js";const ce={class:"page-container operation-report"},pe={class:"module-card command-bar mb-4"},ue={class:"bar-left"},fe={class:"bar-right"},me={class:"grid grid-cols-4 gap-4 mb-4"},ve={class:"stat-card-item"},he={class:"icon-wrapper primary"},xe={class:"info"},_e={class:"value"},ye={class:"stat-card-item success"},be={class:"icon-wrapper"},ge={class:"info"},we={class:"value"},ke={class:"stat-card-item danger"},Re={class:"icon-wrapper"},Me={class:"info"},Se={class:"value"},Ae={class:"stat-card-item info"},Ce={class:"icon-wrapper"},Oe={class:"info"},De={class:"value"},Ee={class:"module-card flex-1 flex flex-col overflow-hidden"},Te={class:"flex flex-col h-full gap-4 p-4"},Pe={class:"chart-container flex-1 relative min-h-[300px]"},Fe={class:"flex-1 flex flex-col min-h-[250px]"},Ve={class:"text-primary font-bold"},We={class:"flex flex-col h-full gap-4 p-4"},ze={class:"grid grid-cols-3 gap-4 h-[300px]"},Ie={class:"sub-module flex flex-col"},Le={class:"sub-module flex flex-col"},Be={class:"sub-module flex flex-col"},Ne={class:"flex-1 flex flex-col"},$e={class:"text-danger"},Ue={class:"grid grid-cols-3 gap-4 h-full p-4"},je={class:"sub-module flex flex-col"},qe={class:"sub-module flex flex-col"},Qe={class:"sub-module flex flex-col"},Ye={class:"flex flex-col h-full gap-4 p-4"},Ge={class:"grid grid-cols-2 gap-4 h-[300px]"},He={class:"sub-module flex flex-col"},Je={class:"sub-module flex flex-col"},Ke={class:"flex-1 flex flex-col"},Xe={class:"flex flex-col h-full gap-4 p-4"},Ze={class:"h-[300px] sub-module flex flex-col"},et={class:"flex-1 flex flex-col"},tt={key:0,class:"text-success"},st={key:1,class:"text-danger"},lt=ee({__name:"OperationReport",setup(at){const W=n("month"),z=n([]),h=n("overview"),x=n({workOrders:342,inspectionRate:98.5,defects:12,ticketPassRate:99.8}),I=n([]),L=n([]),B=n([]),N=n([]),w=n(),k=n(),R=n(),M=n(),S=n(),A=n(),C=n(),O=n(),D=n(),E=n();let d=[];const i={primary:"#00F0FF",secondary:"#0078D7",danger:"#FF2E63",warning:"#FFD600",success:"#00E676",text:"#94A3B8",grid:"rgba(255,255,255,0.05)"},$=()=>{I.value=Array.from({length:5},(l,e)=>({name:`配电室 #${e+101}`,score:(90+Math.random()*10).toFixed(1),woCount:Math.floor(Math.random()*50),defectCount:Math.floor(Math.random()*5),manager:["张三","李四","王五"][e%3]})),L.value=Array.from({length:5},(l,e)=>({name:`站点 A-${e}`,p1:Math.floor(Math.random()*2),p2:Math.floor(Math.random()*5),p3:Math.floor(Math.random()*10),total:0})).map(l=>({...l,total:l.p1+l.p2+l.p3})).sort((l,e)=>e.total-l.total),B.value=Array.from({length:8},(l,e)=>({date:"2023-11-"+(20-e),site:`科技园 #${e+1}`,task:"月度例行巡检",status:Math.random()>.1?"Done":"Pending",issues:Math.floor(Math.random()*3),person:"运维组 A"})),N.value=Array.from({length:8},(l,e)=>({id:`T-20231122-${100+e}`,type:Math.random()>.5?"工作票":"操作票",content:Math.random()>.5?"1#变压器检修":"10kV 母线倒闸��作",site:"总部大楼 #1",date:"2023-11-"+(22-e),status:"Qualified"}))},Q=()=>{const e=[],c=[],f=[];for(let _=0;_<30;_++)e.push(Math.floor(10+Math.random()*15+Math.sin(_/3)*5)),c.push(Math.floor(20+Math.random()*5)),f.push(Math.floor(Math.random()*4));return{workOrders:e,inspections:c,defects:f}},U=()=>{if(!w.value)return;const l=u(w.value),e=Q();l.setOption({backgroundColor:"transparent",tooltip:{trigger:"axis"},legend:{textStyle:{color:i.text},bottom:0},grid:{top:40,right:40,bottom:40,left:40,containLabel:!0},xAxis:{type:"category",data:Array.from({length:30},(c,f)=>`${f+1}`),axisLine:{lineStyle:{color:i.grid}}},yAxis:{type:"value",splitLine:{lineStyle:{color:i.grid}}},series:[{name:"工单",type:"line",smooth:!0,data:e.workOrders,itemStyle:{color:i.primary},areaStyle:{opacity:.1}},{name:"巡检",type:"line",smooth:!0,data:e.inspections,itemStyle:{color:i.success}},{name:"缺陷",type:"line",smooth:!0,data:e.defects,itemStyle:{color:i.danger}}]}),d.push(l)},Y=()=>{if(k.value){const l=u(k.value);l.setOption({backgroundColor:"transparent",tooltip:{trigger:"item"},legend:{bottom:0,textStyle:{color:i.text}},series:[{type:"pie",radius:["40%","65%"],center:["50%","45%"],itemStyle:{borderRadius:5,borderColor:"#000",borderWidth:2},data:[{value:Math.floor(Math.random()*5),name:"紧急 (P1)",itemStyle:{color:i.danger}},{value:Math.floor(Math.random()*10),name:"重要 (P2)",itemStyle:{color:i.warning}},{value:Math.floor(Math.random()*20),name:"一般 (P3)",itemStyle:{color:i.secondary}}]}]}),d.push(l)}if(R.value){const l=u(R.value);l.setOption({backgroundColor:"transparent",tooltip:{trigger:"axis"},xAxis:{type:"category",data:["W1","W2","W3","W4"]},yAxis:{type:"value",min:80,max:100},series:[{type:"line",data:[85,89,94,96],itemStyle:{color:i.success}}]}),d.push(l)}if(M.value){const l=u(M.value);l.setOption({backgroundColor:"transparent",tooltip:{trigger:"axis"},grid:{top:10,bottom:20,left:10,right:20,containLabel:!0},xAxis:{type:"value",show:!1},yAxis:{type:"category",data:["绝缘","通讯","温度","机构","其他"]},series:[{type:"bar",data:[12,10,8,6,4],itemStyle:{color:i.warning}}]}),d.push(l)}},G=()=>{if(S.value){const l=u(S.value);l.setOption({tooltip:{trigger:"item"},series:[{type:"pie",radius:"60%",data:[{value:40,name:"自动"},{value:30,name:"人工"},{value:30,name:"巡检"}]}]}),d.push(l)}if(A.value){const l=u(A.value);l.setOption({tooltip:{trigger:"axis"},xAxis:{type:"category",data:["抢修","消缺","维护"]},yAxis:{},series:[{type:"bar",data:[4,24,48],itemStyle:{color:i.primary}}]}),d.push(l)}if(C.value){const l=u(C.value);l.setOption({tooltip:{trigger:"axis"},xAxis:{type:"category",data:["W1","W2","W3","W4"]},yAxis:{},series:[{type:"line",data:[5,3,2,1],itemStyle:{color:i.danger}}]}),d.push(l)}},H=()=>{if(O.value){const l=u(O.value);l.setOption({tooltip:{trigger:"item"},title:{text:"98%",left:"center",top:"40%",textStyle:{color:"#fff"}},series:[{type:"pie",radius:["50%","70%"],avoidLabelOverlap:!1,data:[{value:98,itemStyle:{color:i.success}},{value:2,itemStyle:{color:i.text}}]}]}),d.push(l)}if(D.value){const l=u(D.value);l.setOption({tooltip:{trigger:"axis"},xAxis:{type:"category",data:["W1","W2","W3","W4"]},yAxis:{},series:[{type:"line",data:[2,5,1,0],itemStyle:{color:i.warning}}]}),d.push(l)}},J=()=>{if(E.value){const l=u(E.value);l.setOption({tooltip:{trigger:"axis"},legend:{bottom:0},xAxis:{type:"category",data:Array.from({length:7},(e,c)=>`D${c+1}`)},yAxis:{},series:[{name:"工作票",type:"line",data:[2,4,1,5,3,2,4],itemStyle:{color:i.primary}},{name:"操作票",type:"line",data:[1,3,2,4,2,1,3],itemStyle:{color:i.warning}}]}),d.push(l)}},K=async()=>{x.value={workOrders:300+Math.floor(Math.random()*100),inspectionRate:+(95+Math.random()*5).toFixed(1),defects:Math.floor(Math.random()*20),ticketPassRate:+(98+Math.random()*2).toFixed(1)},$(),d.forEach(e=>e.dispose()),d=[];const l=h.value;h.value="temp",await P(),h.value=l};return te(h,async l=>{l!=="temp"&&(await P(),setTimeout(()=>{d.forEach(e=>e.dispose()),d=[],l==="overview"?U():l==="defects"?Y():l==="workorders"?G():l==="inspection"?H():l==="permits"&&J()},50))}),se(async()=>{$(),await P(),h.value==="overview"&&U(),window.addEventListener("resize",()=>d.forEach(l=>l.resize()))}),le(()=>{d.forEach(l=>l.dispose())}),(l,e)=>{const c=p("el-icon"),f=p("el-radio-button"),_=p("el-radio-group"),T=p("el-option"),X=p("el-select"),j=p("el-button"),o=p("el-table-column"),g=p("el-table"),y=p("el-tab-pane"),q=p("el-tag"),Z=p("el-tabs");return V(),F("div",ce,[t("div",pe,[t("div",ue,[s(c,{class:"bar-icon"},{default:a(()=>[s(b(ae))]),_:1}),e[3]||(e[3]=t("span",{class:"bar-title"},"运维态势分析报告 (O&M TACTICAL REPORT)",-1))]),t("div",fe,[s(_,{modelValue:W.value,"onUpdate:modelValue":e[0]||(e[0]=r=>W.value=r),class:"sc2-radio-group mr-4",size:"small"},{default:a(()=>[s(f,{label:"week"},{default:a(()=>[...e[4]||(e[4]=[v("本周",-1)])]),_:1}),s(f,{label:"month"},{default:a(()=>[...e[5]||(e[5]=[v("本月",-1)])]),_:1}),s(f,{label:"quarter"},{default:a(()=>[...e[6]||(e[6]=[v("本季度",-1)])]),_:1})]),_:1},8,["modelValue"]),s(X,{modelValue:z.value,"onUpdate:modelValue":e[1]||(e[1]=r=>z.value=r),multiple:"","collapse-tags":"",placeholder:"选择站点",class:"sc2-select w-64 mr-4"},{default:a(()=>[s(T,{label:"总部大楼 #1",value:"1"}),s(T,{label:"科技园区 #2",value:"2"}),s(T,{label:"物流中心 #3",value:"3"})]),_:1},8,["modelValue"]),s(j,{type:"primary",icon:"Search",onClick:K},{default:a(()=>[...e[7]||(e[7]=[v("生成报告",-1)])]),_:1}),s(j,{class:"sc2-btn-outline",icon:"Download"},{default:a(()=>[...e[8]||(e[8]=[v("导出 PDF",-1)])]),_:1})])]),t("div",me,[t("div",ve,[t("div",he,[s(c,null,{default:a(()=>[s(b(oe))]),_:1})]),t("div",xe,[e[9]||(e[9]=t("div",{class:"label"},"工单总数",-1)),t("div",_e,m(x.value.workOrders),1),e[10]||(e[10]=t("div",{class:"sub-val"},[v("环比 "),t("span",{class:"text-success"},"↑ 5%")],-1))])]),t("div",ye,[t("div",be,[s(c,null,{default:a(()=>[s(b(ie))]),_:1})]),t("div",ge,[e[11]||(e[11]=t("div",{class:"label"},"巡检覆盖率",-1)),t("div",we,m(x.value.inspectionRate)+"%",1),e[12]||(e[12]=t("div",{class:"sub-val"},"计划执行无误",-1))])]),t("div",ke,[t("div",Re,[s(c,null,{default:a(()=>[s(b(ne))]),_:1})]),t("div",Me,[e[13]||(e[13]=t("div",{class:"label"},"新增缺陷",-1)),t("div",Se,m(x.value.defects),1),e[14]||(e[14]=t("div",{class:"sub-val"},"主要集中在低压侧",-1))])]),t("div",Ae,[t("div",Ce,[s(c,null,{default:a(()=>[s(b(re))]),_:1})]),t("div",Oe,[e[15]||(e[15]=t("div",{class:"label"},"两票合格率",-1)),t("div",De,m(x.value.ticketPassRate)+"%",1),e[16]||(e[16]=t("div",{class:"sub-val"},"本月无违章",-1))])])]),t("div",Ee,[s(Z,{modelValue:h.value,"onUpdate:modelValue":e[2]||(e[2]=r=>h.value=r),class:"sc2-tabs h-full flex flex-col"},{default:a(()=>[s(y,{label:"综合态势 (OVERVIEW)",name:"overview",class:"h-full"},{default:a(()=>[t("div",Te,[t("div",Pe,[e[17]||(e[17]=t("div",{class:"chart-header"},"30天运维趋势 (30-Day Trend)",-1)),t("div",{ref_key:"trendChartRef",ref:w,class:"w-full h-full",style:{"min-height":"300px"}},null,512)]),t("div",Fe,[e[18]||(e[18]=t("div",{class:"chart-header"},"配电室工作量排名 (Workload Ranking)",-1)),s(g,{data:I.value,class:"sc2-table flex-1",size:"small"},{default:a(()=>[s(o,{type:"index",label:"排名",width:"60"}),s(o,{prop:"name",label:"站点名称"}),s(o,{prop:"score",label:"综合评分",width:"100"},{default:a(({row:r})=>[t("span",Ve,m(r.score),1)]),_:1}),s(o,{prop:"woCount",label:"工单数",width:"100"}),s(o,{prop:"defectCount",label:"缺陷数",width:"100"}),s(o,{prop:"manager",label:"负责人",width:"100"})]),_:1},8,["data"])])])]),_:1}),s(y,{label:"缺陷分析 (DEFECTS)",name:"defects",class:"h-full"},{default:a(()=>[t("div",We,[t("div",ze,[t("div",Ie,[e[19]||(e[19]=t("div",{class:"chart-header"},"缺陷等级分布",-1)),t("div",{ref_key:"defectPieRef",ref:k,class:"flex-1 w-full",style:{"min-height":"200px"}},null,512)]),t("div",Le,[e[20]||(e[20]=t("div",{class:"chart-header"},"消缺闭环率趋势",-1)),t("div",{ref_key:"defectRateRef",ref:R,class:"flex-1 w-full",style:{"min-height":"200px"}},null,512)]),t("div",Be,[e[21]||(e[21]=t("div",{class:"chart-header"},"高发缺陷类型 TOP5",-1)),t("div",{ref_key:"defectBarRef",ref:M,class:"flex-1 w-full",style:{"min-height":"200px"}},null,512)])]),t("div",Ne,[e[22]||(e[22]=t("div",{class:"chart-header"},"站点缺陷频次排名 (Defect Frequency)",-1)),s(g,{data:L.value,class:"sc2-table flex-1",size:"small"},{default:a(()=>[s(o,{type:"index",label:"排名",width:"60"}),s(o,{prop:"name",label:"站点名称"}),s(o,{prop:"p1",label:"紧急缺陷",width:"100"},{default:a(({row:r})=>[t("span",$e,m(r.p1),1)]),_:1}),s(o,{prop:"p2",label:"重大缺陷",width:"100"}),s(o,{prop:"p3",label:"一般缺陷",width:"100"}),s(o,{prop:"total",label:"总计",width:"100",sortable:""})]),_:1},8,["data"])])])]),_:1}),s(y,{label:"工单效率 (EFFICIENCY)",name:"workorders",class:"h-full"},{default:a(()=>[t("div",Ue,[t("div",je,[e[23]||(e[23]=t("div",{class:"chart-header"},"工单来源占比",-1)),t("div",{ref_key:"woSourceRef",ref:S,class:"flex-1 w-full",style:{"min-height":"250px"}},null,512)]),t("div",qe,[e[24]||(e[24]=t("div",{class:"chart-header"},"平均处理时长 (小时)",-1)),t("div",{ref_key:"woDurationRef",ref:A,class:"flex-1 w-full",style:{"min-height":"250px"}},null,512)]),t("div",Qe,[e[25]||(e[25]=t("div",{class:"chart-header"},"工单逾期趋势",-1)),t("div",{ref_key:"woOverdueRef",ref:C,class:"flex-1 w-full",style:{"min-height":"250px"}},null,512)])])]),_:1}),s(y,{label:"巡检表现 (INSPECTION)",name:"inspection",class:"h-full"},{default:a(()=>[t("div",Ye,[t("div",Ge,[t("div",He,[e[26]||(e[26]=t("div",{class:"chart-header"},"巡检计划完成情况",-1)),t("div",{ref_key:"inspPieRef",ref:O,class:"flex-1 w-full",style:{"min-height":"200px"}},null,512)]),t("div",Je,[e[27]||(e[27]=t("div",{class:"chart-header"},"巡检异常发现趋势",-1)),t("div",{ref_key:"inspTrendRef",ref:D,class:"flex-1 w-full",style:{"min-height":"200px"}},null,512)])]),t("div",Ke,[e[28]||(e[28]=t("div",{class:"chart-header"},"巡检执行明细 (Execution Details)",-1)),s(g,{data:B.value,class:"sc2-table flex-1",size:"small"},{default:a(()=>[s(o,{prop:"date",label:"日期",width:"120"}),s(o,{prop:"site",label:"站点"}),s(o,{prop:"task",label:"任务名称"}),s(o,{prop:"status",label:"状态",width:"100"},{default:a(({row:r})=>[s(q,{type:r.status==="Done"?"success":"warning",size:"small"},{default:a(()=>[v(m(r.status),1)]),_:2},1032,["type"])]),_:1}),s(o,{prop:"issues",label:"发现隐患",width:"100"}),s(o,{prop:"person",label:"执行人",width:"100"})]),_:1},8,["data"])])])]),_:1}),s(y,{label:"两票管理 (PERMITS)",name:"permits",class:"h-full"},{default:a(()=>[t("div",Xe,[e[31]||(e[31]=t("div",{class:"grid grid-cols-3 gap-4"},[t("div",{class:"sub-module py-4 flex items-center justify-between"},[t("span",null,"工作票总数"),t("span",{class:"text-xl font-bold text-primary"},"128")]),t("div",{class:"sub-module py-4 flex items-center justify-between"},[t("span",null,"操作票总数"),t("span",{class:"text-xl font-bold text-warning"},"85")]),t("div",{class:"sub-module py-4 flex items-center justify-between"},[t("span",null,"综合合规率"),t("span",{class:"text-xl font-bold text-success"},"99.8%")])],-1)),t("div",Ze,[e[29]||(e[29]=t("div",{class:"chart-header"},"两票开具数量趋势",-1)),t("div",{ref_key:"ticketLineRef",ref:E,class:"flex-1 w-full",style:{"min-height":"200px"}},null,512)]),t("div",et,[e[30]||(e[30]=t("div",{class:"chart-header"},"近期两票记录 (Recent Tickets)",-1)),s(g,{data:N.value,class:"sc2-table flex-1",size:"small"},{default:a(()=>[s(o,{prop:"id",label:"票号",width:"140"}),s(o,{prop:"type",label:"类型",width:"100"},{default:a(({row:r})=>[s(q,{type:r.type==="工作票"?"":"warning",size:"small",effect:"dark"},{default:a(()=>[v(m(r.type),1)]),_:2},1032,["type"])]),_:1}),s(o,{prop:"content",label:"工作/操作任务","show-overflow-tooltip":""}),s(o,{prop:"site",label:"站点",width:"150"}),s(o,{prop:"date",label:"时间",width:"160"}),s(o,{prop:"status",label:"状态",width:"100"},{default:a(({row:r})=>[r.status==="Qualified"?(V(),F("span",tt,"合格")):(V(),F("span",st,"不合格"))]),_:1})]),_:1},8,["data"])])])]),_:1})]),_:1},8,["modelValue"])])])}}}),nt=de(lt,[["__scopeId","data-v-654d7175"]]);export{nt as default};
